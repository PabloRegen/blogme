extends ../layouts/layout

block title
	|read post

block content
	article
		if postedByUser.pic != null
			img.userPic(src=`/uploads/${postedByUser.pic}`)
		else
			img(src='/images/avatar.jpg')
		if postedByUser.name != null
			div.userName #{postedByUser.name}
		if postedByUser.bio != null
			div.userBio #{postedByUser.bio}

		if followedByCurrentUserLength === 0
			// either user hasn't followed the post's owner yet or is not logged-in
			form(action=`/accounts/${post.userId}/follow/${post.id}` method='post')
				input(type='submit' value='Follow' disabled=((currentUser == null) || (currentUser.id === postedByUser.id)))
		else
			form(action=`/accounts/${post.userId}/unfollow/${post.id}` method='post')
				input(type='submit' value='Unfollow' disabled=(currentUser == null))

		| #{followers}

		h1.postTitle!= sanitizer.sanitize(post.title)
		h2.postSubtitle!= sanitizer.sanitize(post.subtitle)

		if post.pic != null
			img.postCoverImage(src=`/uploads/${post.pic}`, alt='Alt post pic', title='Title Post Pic')

		div.postBody!= sanitizer.sanitize(postBody, function(url) { return url; })

		if likedByCurrentUserLength === 0
			// either user hasn't liked the post yet or is not logged-in
			form(action=`/posts/${post.id}/like` method='post')
				input(type='submit' value='Like' disabled=(currentUser == null))
		else
			form(action=`/posts/${post.id}/unlike` method='post')
				input(type='submit' value='Unlike' disabled=(currentUser == null))

		| #{likes}

		div
			if tags !== []
				| tags
				ul
					each tag in tags
						li= tag